import{v as oe,w as ie,x as P,y as c,C as re,h as E,at as ae,W as le,aJ as ce,O as de,a5 as me,am as ue,an as ge,al as pe,ak as he,l as F,m as xe,n as ve,d as fe,e as be,i as je,a as we,b as Ie,ax as ye,aw as Ce,j as e,t as o,F as Se,aK as $e,aI as H,aL as _e,aM as Ee}from"./index-DgChYpsb.js";import{L as _,S as Ne,T as R}from"./index-BqZJTrzk.js";import{F as a}from"./index-Bi6eMDVY.js";import{C as Te,T as Be}from"./index-DFkruNbw.js";import{S as Oe}from"./index-DlSRDo1c.js";import{B as A}from"./button-CElchV4s.js";import{I as d}from"./index-CMLhrbuK.js";import"./DownOutlined-CN3FJKj5.js";import"./TextArea-CZwWy1NO.js";import"./collapse-BbEVqHco.js";import"./row-wWk8FtEW.js";import"./useLocale-BHh5rfC7.js";import"./EyeOutlined-Cm8LOwQp.js";const $=(t,n,s,i,l)=>({background:t,border:`${P(i.lineWidth)} ${i.lineType} ${n}`,[`${l}-icon`]:{color:s}}),ke=t=>{const{componentCls:n,motionDurationSlow:s,marginXS:i,marginSM:l,fontSize:u,fontSizeLG:m,lineHeight:p,borderRadiusLG:v,motionEaseInOutCirc:x,withDescriptionIconSize:b,colorText:w,colorTextHeading:y,withDescriptionPadding:C,defaultPadding:g}=t;return{[n]:Object.assign(Object.assign({},ie(t)),{position:"relative",display:"flex",alignItems:"center",padding:g,wordWrap:"break-word",borderRadius:v,[`&${n}-rtl`]:{direction:"rtl"},[`${n}-content`]:{flex:1,minWidth:0},[`${n}-icon`]:{marginInlineEnd:i,lineHeight:0},"&-description":{display:"none",fontSize:u,lineHeight:p},"&-message":{color:y},[`&${n}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${s} ${x}, opacity ${s} ${x},
        padding-top ${s} ${x}, padding-bottom ${s} ${x},
        margin-bottom ${s} ${x}`},[`&${n}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${n}-with-description`]:{alignItems:"flex-start",padding:C,[`${n}-icon`]:{marginInlineEnd:l,fontSize:b,lineHeight:0},[`${n}-message`]:{display:"block",marginBottom:i,color:y,fontSize:m},[`${n}-description`]:{display:"block",color:w}},[`${n}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},Fe=t=>{const{componentCls:n,colorSuccess:s,colorSuccessBorder:i,colorSuccessBg:l,colorWarning:u,colorWarningBorder:m,colorWarningBg:p,colorError:v,colorErrorBorder:x,colorErrorBg:b,colorInfo:w,colorInfoBorder:y,colorInfoBg:C}=t;return{[n]:{"&-success":$(l,i,s,t,n),"&-info":$(C,y,w,t,n),"&-warning":$(p,m,u,t,n),"&-error":Object.assign(Object.assign({},$(b,x,v,t,n)),{[`${n}-description > pre`]:{margin:0,padding:0}})}}},He=t=>{const{componentCls:n,iconCls:s,motionDurationMid:i,marginXS:l,fontSizeIcon:u,colorIcon:m,colorIconHover:p}=t;return{[n]:{"&-action":{marginInlineStart:l},[`${n}-close-icon`]:{marginInlineStart:l,padding:0,overflow:"hidden",fontSize:u,lineHeight:P(u),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${s}-close`]:{color:m,transition:`color ${i}`,"&:hover":{color:p}}},"&-close-text":{color:m,transition:`color ${i}`,"&:hover":{color:p}}}}},Re=t=>({withDescriptionIconSize:t.fontSizeHeading3,defaultPadding:`${t.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${t.paddingMD}px ${t.paddingContentHorizontalLG}px`}),Me=oe("Alert",t=>[ke(t),Fe(t),He(t)],Re);var M=function(t,n){var s={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(s[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(t);l<i.length;l++)n.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(t,i[l])&&(s[i[l]]=t[i[l]]);return s};const Pe={success:ue,info:ge,error:pe,warning:he},Ae=t=>{const{icon:n,prefixCls:s,type:i}=t,l=Pe[i]||null;return n?de(n,c.createElement("span",{className:`${s}-icon`},n),()=>({className:E(`${s}-icon`,{[n.props.className]:n.props.className})})):c.createElement(l,{className:`${s}-icon`})},ze=t=>{const{isClosable:n,prefixCls:s,closeIcon:i,handleClose:l,ariaProps:u}=t,m=i===!0||i===void 0?c.createElement(me,null):i;return n?c.createElement("button",Object.assign({type:"button",onClick:l,className:`${s}-close-icon`,tabIndex:0},u),m):null},z=c.forwardRef((t,n)=>{const{description:s,prefixCls:i,message:l,banner:u,className:m,rootClassName:p,style:v,onMouseEnter:x,onMouseLeave:b,onClick:w,afterClose:y,showIcon:C,closable:g,closeText:S,closeIcon:I,action:N,id:q}=t,D=M(t,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[T,W]=c.useState(!1),B=c.useRef(null);c.useImperativeHandle(n,()=>({nativeElement:B.current}));const{getPrefixCls:V,direction:G,alert:r}=c.useContext(re),h=V("alert",i),[U,X,K]=Me(h),J=f=>{var j;W(!0),(j=t.onClose)===null||j===void 0||j.call(t,f)},O=c.useMemo(()=>t.type!==void 0?t.type:u?"warning":"info",[t.type,u]),Q=c.useMemo(()=>typeof g=="object"&&g.closeIcon||S?!0:typeof g=="boolean"?g:I!==!1&&I!==null&&I!==void 0?!0:!!(r!=null&&r.closable),[S,I,g,r==null?void 0:r.closable]),k=u&&C===void 0?!0:C,Y=E(h,`${h}-${O}`,{[`${h}-with-description`]:!!s,[`${h}-no-icon`]:!k,[`${h}-banner`]:!!u,[`${h}-rtl`]:G==="rtl"},r==null?void 0:r.className,m,p,K,X),Z=ae(D,{aria:!0,data:!0}),ee=c.useMemo(()=>{var f,j;return typeof g=="object"&&g.closeIcon?g.closeIcon:S||(I!==void 0?I:typeof(r==null?void 0:r.closable)=="object"&&(!((f=r==null?void 0:r.closable)===null||f===void 0)&&f.closeIcon)?(j=r==null?void 0:r.closable)===null||j===void 0?void 0:j.closeIcon:r==null?void 0:r.closeIcon)},[I,g,S,r==null?void 0:r.closeIcon]),te=c.useMemo(()=>{const f=g??(r==null?void 0:r.closable);return typeof f=="object"?M(f,["closeIcon"]):{}},[g,r==null?void 0:r.closable]);return U(c.createElement(le,{visible:!T,motionName:`${h}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:f=>({maxHeight:f.offsetHeight}),onLeaveEnd:y},(f,j)=>{let{className:ne,style:se}=f;return c.createElement("div",Object.assign({id:q,ref:ce(B,j),"data-show":!T,className:E(Y,ne),style:Object.assign(Object.assign(Object.assign({},r==null?void 0:r.style),v),se),onMouseEnter:x,onMouseLeave:b,onClick:w,role:"alert"},Z),k?c.createElement(Ae,{description:s,icon:t.icon,prefixCls:h,type:O}):null,c.createElement("div",{className:`${h}-content`},l?c.createElement("div",{className:`${h}-message`},l):null,s?c.createElement("div",{className:`${h}-description`},s):null),N?c.createElement("div",{className:`${h}-action`},N):null,c.createElement(ze,{isClosable:Q,prefixCls:h,closeIcon:ee,handleClose:J,ariaProps:te}))}))});function Le(t,n,s){return n=F(n),xe(t,ve()?Reflect.construct(n,s||[],F(t).constructor):n.apply(t,s))}let qe=function(t){function n(){var s;return je(this,n),s=Le(this,n,arguments),s.state={error:void 0,info:{componentStack:""}},s}return fe(n,t),be(n,[{key:"componentDidCatch",value:function(i,l){this.setState({error:i,info:l})}},{key:"render",value:function(){const{message:i,description:l,id:u,children:m}=this.props,{error:p,info:v}=this.state,x=(v==null?void 0:v.componentStack)||null,b=typeof i>"u"?(p||"").toString():i,w=typeof l>"u"?x:l;return p?c.createElement(z,{id:u,type:"error",message:b,description:c.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},w)}):m}}])}(c.Component);const L=z;L.ErrorBoundary=qe;const De=(t,n)=>[{key:"1",label:o`view.settings.websiteSettings`,children:e.jsxs(e.Fragment,{children:[e.jsx(a.Item,{name:"site_title",label:o`view.settings.siteTitle`,rules:[{required:!0}],children:e.jsx(d,{})}),e.jsx(a.Item,{name:"site_name",label:o`view.settings.siteName`,rules:[{required:!0}],children:e.jsx(d,{})}),e.jsx(a.Item,{name:"site_url",label:o`view.settings.siteUrl`,rules:[{required:!0}],children:e.jsx(d,{})}),t?null:e.jsxs(e.Fragment,{children:[e.jsx(L,{message:o`view.settings.urlMismatchWarning`,type:"warning",showIcon:!0,closable:!0}),e.jsx("br",{})]}),e.jsx(a.Item,{name:"site_logo",label:o`view.settings.siteLogo`,rules:[{required:!0}],children:e.jsx(d,{})}),e.jsx(a.Item,{label:o`view.settings.siteBackground`,children:e.jsx(_,{name:"site_backgrounds",addButtonText:o`view.settings.addImage`,children:s=>e.jsx(a.Item,{name:s,rules:[{required:!0}],children:e.jsx(d,{})})})})]})},{key:"2",label:o`view.settings.homepageSettings`,children:e.jsxs(e.Fragment,{children:[e.jsx(a.Item,{name:"home_description",label:o`view.settings.homepageDescription`,children:e.jsx(d.TextArea,{rows:3})}),e.jsx(a.Item,{label:o`view.settings.homepageButtons`,children:e.jsx(_,{name:"home_buttons",addButtonText:o`view.settings.addButton`,children:s=>e.jsxs(e.Fragment,{children:[e.jsx(a.Item,{name:[s,"0"],rules:[{required:!0}],children:e.jsx(d,{placeholder:o`view.settings.buttonText`})}),e.jsx(a.Item,{name:[s,"1"],rules:[{required:!0}],children:e.jsx(d,{placeholder:o`view.settings.buttonLink`})})]})})}),e.jsx(a.Item,{label:o`view.settings.homepageTimeline`,children:e.jsx(_,{name:"home_timeline",addButtonText:o`view.settings.addRecord`,children:s=>e.jsxs(e.Fragment,{children:[e.jsx(a.Item,{name:[s,"0"],rules:[{required:!0}],children:e.jsx(d,{placeholder:o`view.settings.time`})}),e.jsx(a.Item,{name:[s,"1"],rules:[{required:!0}],children:e.jsx(d,{placeholder:o`view.settings.content`})})]})})}),e.jsx(a.Item,{name:"home_custom",label:o`view.settings.homepageCustomHtml`,children:e.jsx(d.TextArea,{rows:5})})]})},{key:"3",label:o`view.settings.advancedSettings`,children:e.jsxs(e.Fragment,{children:[e.jsx(a.Item,{name:"admin_username",label:o`view.settings.adminUsername`,rules:[{required:!0}],children:e.jsx(d,{})}),e.jsx(a.Item,{name:"admin_email",label:o`view.settings.adminEmail`,rules:[{required:!0}],children:e.jsx(d,{})}),e.jsx(a.Item,{name:"custom_head_code",label:o`view.settings.customHeadCode`,children:e.jsx(d.TextArea,{rows:5})}),e.jsx(a.Item,{name:"custom_foot_code",label:o`view.settings.customFootCode`,children:e.jsx(d.TextArea,{rows:5})}),e.jsx(a.Item,{name:"google_analytics_id",label:o`view.settings.googleAnalyticsId`,children:e.jsx(d,{})})]})},{key:"4",label:o`view.settings.emailSettings`,children:e.jsxs(e.Fragment,{children:[e.jsx(a.Item,{name:"birthdays",label:o`view.settings.sendBirthdayReminders`,rules:[{required:!0}],children:e.jsx(Ne,{checkedChildren:o`view.settings.enabled`,unCheckedChildren:o`view.settings.disabled`,defaultChecked:!0})}),e.jsx(a.Item,{name:"smtp_host",label:o`view.settings.smtpHost`,children:e.jsx(d,{})}),e.jsx(a.Item,{name:"smtp_port",label:o`view.settings.smtpPort`,children:e.jsx(R,{max:65535,min:1})}),e.jsx(a.Item,{name:"smtp_email",label:o`view.settings.email`,children:e.jsx(d,{})}),e.jsx(a.Item,{name:"smtp_key",label:o`view.settings.key`,children:e.jsx(d,{})}),e.jsx(a.Item,{name:"smtp_hours",label:o`view.settings.sendingHour`,children:e.jsx(R,{max:23,min:0})}),e.jsx(a.Item,{name:"smtp_target",label:o`view.settings.targetEmail`,children:e.jsx(d,{})}),e.jsx(a.Item,{name:"smtp_template",label:o`view.settings.emailTemplate`,children:e.jsx(d.TextArea,{rows:5})}),e.jsx(A,{type:"primary",className:"cardButton",onClick:n,children:o`view.settings.testEmail`})]})}],st=()=>{const[t]=a.useForm(),n=we(Ie),s=ye(),i=Ce();c.useEffect(()=>t.setFieldsValue(n));async function l(m){const p=x=>x.map(b=>[b[0],b[1]]),v={...m,home_buttons:m.home_buttons?p(m.home_buttons):void 0,home_timeline:m.home_timeline?p(m.home_timeline):void 0};await $e(v),H.success({message:o`view.settings.saveSuccess`}),s(_e(v)),setTimeout(()=>{i(0)},500)}async function u(){await Ee(),H.success({message:o`view.settings.testEmailSuccess`})}return e.jsxs("div",{children:[e.jsx("h1",{children:o`view.settings.systemSettings`}),e.jsx(Se,{justify:"center",align:"center",vertical:!0,children:e.jsx(Te,{hoverable:!0,className:"card cardFixed",children:e.jsxs(a,{form:t,name:"control-hooks",className:"cardForm cleanAll",onFinish:l,children:[e.jsx(Be,{defaultActiveKey:"1",items:De(new URL(location.href).origin===n.site_url,u)}),e.jsx("br",{}),e.jsx(a.Item,{children:e.jsx(Oe,{children:e.jsx(A,{type:"primary",htmlType:"submit",className:"cardButton",children:o`view.settings.saveSettings`})})})]})})})]})};export{st as default};
